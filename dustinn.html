<!doctype html>
<html>
    <head>
        
    </head>
    <body>
        <a href="sms:+18321112222?body=hello world" id="android"></a>
        <a href="sms:+18321112222&body=hello world" id="notandroid"></a>
        <script>
            
            var ua = navigator.userAgent.toLowerCase(),
                isAndroid = ua.indexOf("android") > -1;
            if( isAndroid ) {
                document.getElementById('android').click();
             } else {
                 jQuery(function($) {
  // This version does work, because the window.open is
  // during the event processing. But it uses a synchronous
  // ajax call, locking up the browser UI while the call is
  // in progress.
  $(document).click(function(e) {
    e.preventDefault();
    $.ajax({
      url:      window.location.href,
      async:    false,
      dataType: "json",
      success:  function() {
         window.open($('#notandroid').attr('href'));
      }
    });
  });
});
                // document.getElementById('notandroid').click();
             }
            
        </script>
    </body>
</html>
